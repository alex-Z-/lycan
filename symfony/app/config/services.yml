# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/book/service_container.html
parameters:
#    parameter_name: value
    appbundle.db.table_prefix: lycan_
services:

    app.importer:
        class: AppBundle\Importer\Importer
        arguments:  [@app.logger.console, @doctrine.orm.entity_manager ]
        calls:
            - [ setContainer,[ @service_container ] ]

    app.importer.csv:
        class: AppBundle\Block\UpsertCSVService
        arguments: [ "upsert_csv_not_needed", @templating, @service_container ]
        tags:
            - { name: sonata.block }

    appbundle.tblprefix_subscriber:
            class: AppBundle\Subscriber\TablePrefixSubscriber
            arguments: [%appbundle.db.table_prefix%]
            tags:
                - { name: doctrine.event_subscriber }

    gedmo.listener.softdeleteable:
        class: Gedmo\SoftDeleteable\SoftDeleteableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ]

    gedmo.listener.timestampable:
        class: Gedmo\Timestampable\TimestampableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ]

    app.log.formatter.blank:
            class: Symfony\Bridge\Monolog\Formatter\ConsoleFormatter
            arguments:
                - "%%start_tag%%%%message%%%%end_tag%%, %%context%%\n"