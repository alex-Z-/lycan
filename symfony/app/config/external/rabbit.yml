old_sound_rabbit_mq:
    connections:
        default:
            host:     "%rabbitmq_host%"
            user:     "%rabbitmq_user%"
            password: "%rabbitmq_pass%"
            port:     "%rabbitmq_port%"
            vhost:    "%rabbitmq_vhost%"
            lazy:     false
            connection_timeout: 3
            read_write_timeout: 3

            # requires php-amqplib v2.4.1+ and PHP5.4+
            keepalive: false

            # requires php-amqplib v2.4.1+
            heartbeat: 0

            #requires php_sockets.dll
            use_socket: false # default false
    producers:
        pull_provider:
            connection: default
            exchange_options: { name: 'pull_provider', type: 'topic' }
            service_alias: lycan.rabbit.producer.pull_provider
            # 2 DAY TTL 60000 * 60 * 24 * 2
            queue_options:
                name: 'pull_provider'
                arguments: {'x-message-ttl': ['I', 172800000]}

        pull_listing:
            connection: default
            exchange_options: { name: 'pull_listing', type: 'topic' }
            service_alias: lycan.rabbit.producer.pull_listing
            # 3 hour TTL
            queue_options:
                name: 'pull_listing'
                arguments: {'x-message-ttl': ['I', 172800000]}

        push_brand:
            connection: default
            exchange_options: { name: 'push_brand', type: 'topic' }
            service_alias: lycan.rabbit.producer.push_brand
            # 2 DAY TTL 60000 * 60 * 24 * 2
            queue_options:
                name: 'push_brand'
                arguments: {'x-message-ttl': ['I', 172800000]}

        push_listing:
            connection: default
            exchange_options: { name: 'push_listing', type: 'topic' }
            service_alias: lycan.rabbit.producer.push_listing
            # 3 hour TTL
            queue_options:
                name: 'push_listing'
                arguments: {'x-message-ttl': ['I', 172800000]}

    consumers:
        pull_provider:
            connection:       default
            exchange_options: {name: 'pull_provider', type: topic}
            queue_options:
                name: 'pull_provider'
                arguments: {'x-message-ttl': ['I', 172800000]}
                routing_keys:
                    - lycan.provider.#
            callback:   lycan.rabbit.consumer.pull_provider
            enable_logger: true

        pull_listing:
            connection:       default
            exchange_options: {name: 'pull_listing',  type: topic}
            queue_options:
                name: 'pull_listing'
                arguments: {'x-message-ttl': ['I', 172800000]}
                routing_keys:
                    - lycan.provider.#
            callback:   lycan.rabbit.consumer.pull_listing
            enable_logger: true

        push_brand:
            connection:       default
            exchange_options: {name: 'push_brand',  type: topic}
            queue_options:
                name: 'push_brand'
                arguments: {'x-message-ttl': ['I', 172800000]}
                routing_keys:
                    - lycan.provider.#
            callback:   lycan.rabbit.consumer.push_brand
            enable_logger: true

        push_listing:
            connection:       default
            exchange_options: {name: 'push_listing', type: topic}
            queue_options:
                name: 'push_listing'
                arguments: {'x-message-ttl': ['I', 172800000]}
                routing_keys:
                    - lycan.provider.#
            callback:   lycan.rabbit.consumer.push_listing
            enable_logger: true
